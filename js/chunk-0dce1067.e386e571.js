(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0dce1067"],{4385:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"content container"},[t._m(0),r("div",{staticClass:"content__catalog"},[r("product-filter",{attrs:{"category-id":t.filterCategoryId,"color-id":t.filterColorId,"price-from":t.filterPriceFrom,"price-to":t.filterPriceTo},on:{"update:categoryId":function(e){t.filterCategoryId=e},"update:category-id":function(e){t.filterCategoryId=e},"update:colorId":function(e){t.filterColorId=e},"update:color-id":function(e){t.filterColorId=e},"update:priceFrom":function(e){t.filterPriceFrom=e},"update:price-from":function(e){t.filterPriceFrom=e},"update:priceTo":function(e){t.filterPriceTo=e},"update:price-to":function(e){t.filterPriceTo=e}}}),r("section",{staticClass:"catalog"},[t.productsLoading?r("loader",{attrs:{object:"#000000",color1:"#ffffff",color2:"#17fd3d",size:"5",speed:"2",bg:"#343a40",objectbg:"#999793",opacity:"80",name:"circular"}}):t._e(),t.productsLoadingFailed?r("div",[t._v("Ошибка загрузки. "),r("button",{on:{click:function(e){return e.preventDefault(),t.loadProducts.apply(null,arguments)}}},[t._v("Поробовать ещё раз")])]):t._e(),r("product-list",{attrs:{products:t.products}}),r("base-pagination",{attrs:{count:t.countProducts,"per-page":t.productsPerPage},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content__top content__top--catalog"},[r("h1",{staticClass:"content__title"},[t._v(" Каталог ")])])}],i=r("5530"),n=(r("d81d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"catalog__list"},t._l(t.products,(function(t){return r("product-item",{key:t.id,attrs:{product:t}})})),1)}),c=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"catalog__item"},[r("router-link",{staticClass:"catalog__pic",attrs:{to:{name:"product",params:{id:t.product.id}}}},[r("img",{attrs:{src:t.product.image,alt:t.product.title}})]),r("h3",{staticClass:"catalog__title"},[r("a",{attrs:{href:"#"}},[t._v(" "+t._s(t.product.title)+" ")])]),r("span",{staticClass:"catalog__price"},[t._v(" "+t._s(t._f("numberFormat")(t.product.price))+" Р ")]),r("ul",{staticClass:"colors colors--black"},t._l(t.product.colors,(function(e){return r("li",{key:e.id,staticClass:"colors__item"},[r("label",{staticClass:"colors__label"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"color.id"}],staticClass:"colors__radio sr-only",attrs:{type:"radio",value:"#73B6EA",name:"color"},domProps:{checked:t._q(e.id,"#73B6EA")},on:{change:function(r){return t.$set(e,"id","#73B6EA")}}}),r("span",{staticClass:"colors__value",style:{"background-color":e.code}})])])})),0)],1)},l=[],u=r("54c6"),d={name:"ProductItem",props:["product"],filters:{numberFormat:u["a"]}},p=d,f=r("2877"),m=Object(f["a"])(p,s,l,!1,null,null,null),_=m.exports,g={name:"ProductList",components:{ProductItem:_},props:["products"]},h=g,b=Object(f["a"])(h,n,c,!1,null,"5608b4d3",null),C=b.exports,v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",{staticClass:"catalog__pagination pagination"},[r("li",{staticClass:"pagination__item"},[r("button",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":1==t.page},attrs:{disabled:1==t.page,"aria-label":"Предыдущая страница"},on:{click:function(e){return t.paginate(t.page-1)}}},[r("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-arrow-left"}})])])]),t._l(t.pages,(function(e){return r("li",{key:e,staticClass:"pagination__item"},[r("a",{staticClass:"pagination__link",class:{"pagination__link--current":e===t.page},attrs:{href:"#"},on:{click:function(r){return r.preventDefault(),t.paginate(e)}}},[t._v(" "+t._s(e)+" ")])])})),r("li",{staticClass:"pagination__item"},[r("button",{staticClass:"pagination__link pagination__link--arrow",class:{"pagination__link--disabled":t.page==t.pages},attrs:{"aria-label":"Следующая страница",disabled:t.page===t.pages},on:{click:function(e){return t.paginate(t.page+1)}}},[r("svg",{attrs:{width:"8",height:"14",fill:"currentColor"}},[r("use",{attrs:{"xlink:href":"#icon-arrow-right"}})])])])],2)},P=[],y={name:"BasePagination",model:{prop:"page",event:"paginate"},props:["page","count","perPage"],computed:{pages:function(){return Math.ceil(this.count/this.perPage)}},methods:{paginate:function(t){this.$emit("paginate",t)}}},I=y,k=Object(f["a"])(I,v,P,!1,null,"4ea2d67b",null),F=k.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("aside",{staticClass:"filter"},[r("h2",{staticClass:"filter__title"},[t._v(" Фильтры ")]),r("form",{staticClass:"filter__form form",attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v(" Цена ")]),r("label",{staticClass:"form__label form__label--price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceFrom,expression:"currentPriceFrom",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"min-price"},domProps:{value:t.currentPriceFrom},on:{input:function(e){e.target.composing||(t.currentPriceFrom=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{staticClass:"form__value"},[t._v("От")])]),r("label",{staticClass:"form__label form__label--price"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentPriceTo,expression:"currentPriceTo",modifiers:{number:!0}}],staticClass:"form__input",attrs:{type:"text",name:"max-price"},domProps:{value:t.currentPriceTo},on:{input:function(e){e.target.composing||(t.currentPriceTo=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}}),r("span",{staticClass:"form__value"},[t._v("До")])])]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v(" Категория ")]),r("label",{staticClass:"form__label form__label--select"},[r("select",{directives:[{name:"model",rawName:"v-model.number",value:t.currentCategoryId,expression:"currentCategoryId",modifiers:{number:!0}}],staticClass:"form__select",attrs:{type:"text",name:"category"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var r="_value"in e?e._value:e.value;return t._n(r)}));t.currentCategoryId=e.target.multiple?r:r[0]}}},[r("option",{attrs:{value:"0"}},[t._v("Все категории")]),t._l(t.categories,(function(e){return r("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])}))],2)])]),r("fieldset",{staticClass:"form__block"},[r("legend",{staticClass:"form__legend"},[t._v(" Цвет ")]),r("ul",{staticClass:"colors"},t._l(t.colors,(function(e){return r("li",{key:e.id,staticClass:"colors__item"},[r("label",{staticClass:"colors__label"},[r("input",{directives:[{name:"model",rawName:"v-model.number",value:t.currentColorId,expression:"currentColorId",modifiers:{number:!0}}],staticClass:"colors__radio sr-only",attrs:{type:"radio",name:"color"},domProps:{value:e.id,checked:t._q(t.currentColorId,t._n(e.id))},on:{change:function(r){t.currentColorId=t._n(e.id)}}}),r("span",{staticClass:"colors__value",style:{"background-color":e.code}})])])})),0)]),r("button",{staticClass:"filter__submit button button--primery",attrs:{type:"submit"}},[t._v(" Применить ")]),r("button",{staticClass:"filter__reset button button--second",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(" Сбросить ")])])])},w=[],x=(r("fb6a"),r("bc3a")),D=r.n(x),$=r("db49"),L={props:["priceFrom","priceTo","categoryId","colorId"],data:function(){return{currentPriceFrom:0,currentPriceTo:0,currentCategoryId:0,currentColorId:0,categoriesData:null,colorsData:null}},computed:{categories:function(){return this.categoriesData?this.categoriesData.items:[]},colors:function(){return this.colorsData?this.colorsData.items.slice(0,-1):[]}},watch:{priceFrom:function(t){this.currentPriceFrom=t},priceTo:function(t){this.currentPriceTo=t},categoryId:function(t){this.currentCategoryId=t},colorId:function(t){this.currentColorId=t}},methods:{submit:function(){this.$emit("update:priceFrom",this.currentPriceFrom),this.$emit("update:priceTo",this.currentPriceTo),this.$emit("update:categoryId",this.currentCategoryId),this.$emit("update:colorId",this.currentColorId)},reset:function(){this.$emit("update:priceFrom",0),this.$emit("update:priceTo",0),this.$emit("update:categoryId",0),this.$emit("update:colorId",0)},loadCategories:function(){var t=this;D.a.get($["a"]+"/productCategories").then((function(e){return t.categoriesData=e.data}))},loadColors:function(){var t=this;D.a.get($["a"]+"/colors").then((function(e){return t.colorsData=e.data}))}},created:function(){this.loadCategories(),this.loadColors()}},j=L,E=Object(f["a"])(j,T,w,!1,null,"2f99fb3a",null),A=E.exports,O={components:{ProductList:C,BasePagination:F,ProductFilter:A},data:function(){return{filterPriceFrom:0,filterPriceTo:0,filterCategoryId:0,filterColorId:0,page:1,productsPerPage:3,productsData:null,productsLoading:!1,productsLoadingFailed:!1}},computed:{products:function(){return this.productsData?this.productsData.items.map((function(t){return Object(i["a"])(Object(i["a"])({},t),{},{image:t.image.file.url})})):[]},countProducts:function(){return this.productsData?this.productsData.pagination.total:0}},methods:{loadProducts:function(){var t=this;this.productsLoading=!0,this.productsLoadingFailed=!1,clearTimeout(this.loadProductsTimer),this.loadProductsTimer=setTimeout((function(){D.a.get($["a"]+"/products",{params:{page:t.page,limit:t.productsPerPage,colorId:t.filterColorId,categoryId:t.filterCategoryId,minPrice:t.filterPriceFrom,maxPrice:t.filterPriceTo}}).then((function(e){return t.productsData=e.data})).catch((function(){return t.productsLoadingFailed=!0})).then((function(){return t.productsLoading=!1}))}),0)}},watch:{page:function(){this.loadProducts()},filterPriceFrom:function(){this.loadProducts()},filterPriceTo:function(){this.loadProducts()},filterCategoryId:function(){this.loadProducts()},filterColorId:function(){this.loadProducts()}},created:function(){this.loadProducts()}},N=O,B=Object(f["a"])(N,o,a,!1,null,"0f745de7",null);e["default"]=B.exports},"54c6":function(t,e,r){"use strict";function o(t){return(new Intl.NumberFormat).format(t)}r.d(e,"a",(function(){return o}))},fb6a:function(t,e,r){"use strict";var o=r("23e7"),a=r("e8b5"),i=r("68ee"),n=r("861d"),c=r("23cb"),s=r("07fa"),l=r("fc6a"),u=r("8418"),d=r("b622"),p=r("1dde"),f=p("slice"),m=d("species"),_=[].slice,g=Math.max;o({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var r,o,d,p=l(this),f=s(p),h=c(t,f),b=c(void 0===e?f:e,f);if(a(p)&&(r=p.constructor,i(r)&&(r===Array||a(r.prototype))?r=void 0:n(r)&&(r=r[m],null===r&&(r=void 0)),r===Array||void 0===r))return _.call(p,h,b);for(o=new(void 0===r?Array:r)(g(b-h,0)),d=0;h<b;h++,d++)h in p&&u(o,d,p[h]);return o.length=d,o}})}}]);
//# sourceMappingURL=chunk-0dce1067.e386e571.js.map